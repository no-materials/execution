// Copyright 2026 the Execution Tape Authors
// SPDX-License-Identifier: Apache-2.0 OR MIT

// @generated by execution_tape_codegen. Do not edit by hand.

impl Instr {
    /// Iterates the virtual registers read by this instruction (allocation-free).
    #[must_use]
    pub(crate) fn reads(&self) -> ReadsIter<'_> {
        match self {
            Self::Nop => ReadsIter::none(),
            Self::Mov { src, .. } => ReadsIter::one(*src),
            Self::Trap { .. } => ReadsIter::none(),
            Self::ConstUnit { .. } => ReadsIter::none(),
            Self::ConstBool { .. } => ReadsIter::none(),
            Self::ConstI64 { .. } => ReadsIter::none(),
            Self::ConstU64 { .. } => ReadsIter::none(),
            Self::ConstF64 { .. } => ReadsIter::none(),
            Self::ConstDecimal { .. } => ReadsIter::none(),
            Self::ConstPool { .. } => ReadsIter::none(),
            Self::DecAdd { a, b, .. } => ReadsIter::two(*a, *b),
            Self::DecSub { a, b, .. } => ReadsIter::two(*a, *b),
            Self::DecMul { a, b, .. } => ReadsIter::two(*a, *b),
            Self::F64Add { a, b, .. } => ReadsIter::two(*a, *b),
            Self::F64Sub { a, b, .. } => ReadsIter::two(*a, *b),
            Self::F64Mul { a, b, .. } => ReadsIter::two(*a, *b),
            Self::I64Add { a, b, .. } => ReadsIter::two(*a, *b),
            Self::I64Sub { a, b, .. } => ReadsIter::two(*a, *b),
            Self::I64Mul { a, b, .. } => ReadsIter::two(*a, *b),
            Self::U64Add { a, b, .. } => ReadsIter::two(*a, *b),
            Self::U64Sub { a, b, .. } => ReadsIter::two(*a, *b),
            Self::U64Mul { a, b, .. } => ReadsIter::two(*a, *b),
            Self::U64And { a, b, .. } => ReadsIter::two(*a, *b),
            Self::U64Or { a, b, .. } => ReadsIter::two(*a, *b),
            Self::I64Eq { a, b, .. } => ReadsIter::two(*a, *b),
            Self::I64Lt { a, b, .. } => ReadsIter::two(*a, *b),
            Self::U64Eq { a, b, .. } => ReadsIter::two(*a, *b),
            Self::U64Lt { a, b, .. } => ReadsIter::two(*a, *b),
            Self::U64Xor { a, b, .. } => ReadsIter::two(*a, *b),
            Self::U64Shl { a, b, .. } => ReadsIter::two(*a, *b),
            Self::U64Shr { a, b, .. } => ReadsIter::two(*a, *b),
            Self::U64Gt { a, b, .. } => ReadsIter::two(*a, *b),
            Self::BoolNot { a, .. } => ReadsIter::one(*a),
            Self::U64Le { a, b, .. } => ReadsIter::two(*a, *b),
            Self::U64Ge { a, b, .. } => ReadsIter::two(*a, *b),
            Self::I64And { a, b, .. } => ReadsIter::two(*a, *b),
            Self::U64ToI64 { a, .. } => ReadsIter::one(*a),
            Self::I64ToU64 { a, .. } => ReadsIter::one(*a),
            Self::I64Or { a, b, .. } => ReadsIter::two(*a, *b),
            Self::I64Xor { a, b, .. } => ReadsIter::two(*a, *b),
            Self::Select { cond, a, b, .. } => ReadsIter::three(*cond, *a, *b),
            Self::I64Gt { a, b, .. } => ReadsIter::two(*a, *b),
            Self::I64Le { a, b, .. } => ReadsIter::two(*a, *b),
            Self::I64Ge { a, b, .. } => ReadsIter::two(*a, *b),
            Self::I64Shl { a, b, .. } => ReadsIter::two(*a, *b),
            Self::I64Shr { a, b, .. } => ReadsIter::two(*a, *b),
            Self::Br { cond, .. } => ReadsIter::one(*cond),
            Self::Jmp { .. } => ReadsIter::none(),
            Self::Call { eff_in, args: rest, .. } => ReadsIter::one_plus_slice(*eff_in, rest.as_slice()),
            Self::Ret { eff_in, rets: rest, .. } => ReadsIter::one_plus_slice(*eff_in, rest.as_slice()),
            Self::HostCall { eff_in, args: rest, .. } => ReadsIter::one_plus_slice(*eff_in, rest.as_slice()),
            Self::ConstFunc { .. } => ReadsIter::none(),
            Self::CallIndirect { callee, eff_in, args: rest, .. } => ReadsIter::two_plus_slice(*callee, *eff_in, rest.as_slice()),
            Self::ClosureNew { func, env, .. } => ReadsIter::two(*func, *env),
            Self::TupleNew { values: rest, .. } => ReadsIter::slice(rest.as_slice()),
            Self::TupleGet { tuple, .. } => ReadsIter::one(*tuple),
            Self::StructNew { values: rest, .. } => ReadsIter::slice(rest.as_slice()),
            Self::StructGet { st, .. } => ReadsIter::one(*st),
            Self::ArrayNew { values: rest, .. } => ReadsIter::slice(rest.as_slice()),
            Self::ArrayLen { arr, .. } => ReadsIter::one(*arr),
            Self::ArrayGet { arr, index, .. } => ReadsIter::two(*arr, *index),
            Self::TupleLen { tuple, .. } => ReadsIter::one(*tuple),
            Self::StructFieldCount { st, .. } => ReadsIter::one(*st),
            Self::ArrayGetImm { arr, .. } => ReadsIter::one(*arr),
            Self::BytesLen { bytes, .. } => ReadsIter::one(*bytes),
            Self::StrLen { s, .. } => ReadsIter::one(*s),
            Self::I64Div { a, b, .. } => ReadsIter::two(*a, *b),
            Self::I64Rem { a, b, .. } => ReadsIter::two(*a, *b),
            Self::U64Div { a, b, .. } => ReadsIter::two(*a, *b),
            Self::U64Rem { a, b, .. } => ReadsIter::two(*a, *b),
            Self::I64ToF64 { a, .. } => ReadsIter::one(*a),
            Self::U64ToF64 { a, .. } => ReadsIter::one(*a),
            Self::F64ToI64 { a, .. } => ReadsIter::one(*a),
            Self::F64ToU64 { a, .. } => ReadsIter::one(*a),
            Self::DecToI64 { a, .. } => ReadsIter::one(*a),
            Self::DecToU64 { a, .. } => ReadsIter::one(*a),
            Self::I64ToDec { a, .. } => ReadsIter::one(*a),
            Self::U64ToDec { a, .. } => ReadsIter::one(*a),
            Self::BytesEq { a, b, .. } => ReadsIter::two(*a, *b),
            Self::StrEq { a, b, .. } => ReadsIter::two(*a, *b),
            Self::BytesConcat { a, b, .. } => ReadsIter::two(*a, *b),
            Self::StrConcat { a, b, .. } => ReadsIter::two(*a, *b),
            Self::BytesGet { bytes, index, .. } => ReadsIter::two(*bytes, *index),
            Self::BytesGetImm { bytes, .. } => ReadsIter::one(*bytes),
            Self::BytesSlice { bytes, start, end, .. } => ReadsIter::three(*bytes, *start, *end),
            Self::StrSlice { s, start, end, .. } => ReadsIter::three(*s, *start, *end),
            Self::StrToBytes { s, .. } => ReadsIter::one(*s),
            Self::BytesToStr { bytes, .. } => ReadsIter::one(*bytes),
            Self::F64Div { a, b, .. } => ReadsIter::two(*a, *b),
            Self::F64Eq { a, b, .. } => ReadsIter::two(*a, *b),
            Self::F64Lt { a, b, .. } => ReadsIter::two(*a, *b),
            Self::F64Gt { a, b, .. } => ReadsIter::two(*a, *b),
            Self::F64Le { a, b, .. } => ReadsIter::two(*a, *b),
            Self::F64Ge { a, b, .. } => ReadsIter::two(*a, *b),
            Self::BoolAnd { a, b, .. } => ReadsIter::two(*a, *b),
            Self::BoolOr { a, b, .. } => ReadsIter::two(*a, *b),
            Self::BoolXor { a, b, .. } => ReadsIter::two(*a, *b),
            Self::F64Neg { a, .. } => ReadsIter::one(*a),
            Self::F64Abs { a, .. } => ReadsIter::one(*a),
            Self::F64Min { a, b, .. } => ReadsIter::two(*a, *b),
            Self::F64Max { a, b, .. } => ReadsIter::two(*a, *b),
            Self::F64MinNum { a, b, .. } => ReadsIter::two(*a, *b),
            Self::F64MaxNum { a, b, .. } => ReadsIter::two(*a, *b),
            Self::F64Rem { a, b, .. } => ReadsIter::two(*a, *b),
            Self::F64ToBits { a, .. } => ReadsIter::one(*a),
            Self::F64FromBits { a, .. } => ReadsIter::one(*a),
        }
    }

    /// Iterates the virtual registers written by this instruction (allocation-free).
    #[must_use]
    pub(crate) fn writes(&self) -> WritesIter<'_> {
        match self {
            Self::Nop => WritesIter::none(),
            Self::Mov { dst, .. } => WritesIter::one(*dst),
            Self::Trap { .. } => WritesIter::none(),
            Self::ConstUnit { dst, .. } => WritesIter::one(*dst),
            Self::ConstBool { dst, .. } => WritesIter::one(*dst),
            Self::ConstI64 { dst, .. } => WritesIter::one(*dst),
            Self::ConstU64 { dst, .. } => WritesIter::one(*dst),
            Self::ConstF64 { dst, .. } => WritesIter::one(*dst),
            Self::ConstDecimal { dst, .. } => WritesIter::one(*dst),
            Self::ConstPool { dst, .. } => WritesIter::one(*dst),
            Self::DecAdd { dst, .. } => WritesIter::one(*dst),
            Self::DecSub { dst, .. } => WritesIter::one(*dst),
            Self::DecMul { dst, .. } => WritesIter::one(*dst),
            Self::F64Add { dst, .. } => WritesIter::one(*dst),
            Self::F64Sub { dst, .. } => WritesIter::one(*dst),
            Self::F64Mul { dst, .. } => WritesIter::one(*dst),
            Self::I64Add { dst, .. } => WritesIter::one(*dst),
            Self::I64Sub { dst, .. } => WritesIter::one(*dst),
            Self::I64Mul { dst, .. } => WritesIter::one(*dst),
            Self::U64Add { dst, .. } => WritesIter::one(*dst),
            Self::U64Sub { dst, .. } => WritesIter::one(*dst),
            Self::U64Mul { dst, .. } => WritesIter::one(*dst),
            Self::U64And { dst, .. } => WritesIter::one(*dst),
            Self::U64Or { dst, .. } => WritesIter::one(*dst),
            Self::I64Eq { dst, .. } => WritesIter::one(*dst),
            Self::I64Lt { dst, .. } => WritesIter::one(*dst),
            Self::U64Eq { dst, .. } => WritesIter::one(*dst),
            Self::U64Lt { dst, .. } => WritesIter::one(*dst),
            Self::U64Xor { dst, .. } => WritesIter::one(*dst),
            Self::U64Shl { dst, .. } => WritesIter::one(*dst),
            Self::U64Shr { dst, .. } => WritesIter::one(*dst),
            Self::U64Gt { dst, .. } => WritesIter::one(*dst),
            Self::BoolNot { dst, .. } => WritesIter::one(*dst),
            Self::U64Le { dst, .. } => WritesIter::one(*dst),
            Self::U64Ge { dst, .. } => WritesIter::one(*dst),
            Self::I64And { dst, .. } => WritesIter::one(*dst),
            Self::U64ToI64 { dst, .. } => WritesIter::one(*dst),
            Self::I64ToU64 { dst, .. } => WritesIter::one(*dst),
            Self::I64Or { dst, .. } => WritesIter::one(*dst),
            Self::I64Xor { dst, .. } => WritesIter::one(*dst),
            Self::Select { dst, .. } => WritesIter::one(*dst),
            Self::I64Gt { dst, .. } => WritesIter::one(*dst),
            Self::I64Le { dst, .. } => WritesIter::one(*dst),
            Self::I64Ge { dst, .. } => WritesIter::one(*dst),
            Self::I64Shl { dst, .. } => WritesIter::one(*dst),
            Self::I64Shr { dst, .. } => WritesIter::one(*dst),
            Self::Br { .. } => WritesIter::none(),
            Self::Jmp { .. } => WritesIter::none(),
            Self::Call { eff_out, rets: rest, .. } => WritesIter::one_plus_slice(*eff_out, rest.as_slice()),
            Self::Ret { .. } => WritesIter::none(),
            Self::HostCall { eff_out, rets: rest, .. } => WritesIter::one_plus_slice(*eff_out, rest.as_slice()),
            Self::ConstFunc { dst, .. } => WritesIter::one(*dst),
            Self::CallIndirect { eff_out, rets: rest, .. } => WritesIter::one_plus_slice(*eff_out, rest.as_slice()),
            Self::ClosureNew { dst, .. } => WritesIter::one(*dst),
            Self::TupleNew { dst, .. } => WritesIter::one(*dst),
            Self::TupleGet { dst, .. } => WritesIter::one(*dst),
            Self::StructNew { dst, .. } => WritesIter::one(*dst),
            Self::StructGet { dst, .. } => WritesIter::one(*dst),
            Self::ArrayNew { dst, .. } => WritesIter::one(*dst),
            Self::ArrayLen { dst, .. } => WritesIter::one(*dst),
            Self::ArrayGet { dst, .. } => WritesIter::one(*dst),
            Self::TupleLen { dst, .. } => WritesIter::one(*dst),
            Self::StructFieldCount { dst, .. } => WritesIter::one(*dst),
            Self::ArrayGetImm { dst, .. } => WritesIter::one(*dst),
            Self::BytesLen { dst, .. } => WritesIter::one(*dst),
            Self::StrLen { dst, .. } => WritesIter::one(*dst),
            Self::I64Div { dst, .. } => WritesIter::one(*dst),
            Self::I64Rem { dst, .. } => WritesIter::one(*dst),
            Self::U64Div { dst, .. } => WritesIter::one(*dst),
            Self::U64Rem { dst, .. } => WritesIter::one(*dst),
            Self::I64ToF64 { dst, .. } => WritesIter::one(*dst),
            Self::U64ToF64 { dst, .. } => WritesIter::one(*dst),
            Self::F64ToI64 { dst, .. } => WritesIter::one(*dst),
            Self::F64ToU64 { dst, .. } => WritesIter::one(*dst),
            Self::DecToI64 { dst, .. } => WritesIter::one(*dst),
            Self::DecToU64 { dst, .. } => WritesIter::one(*dst),
            Self::I64ToDec { dst, .. } => WritesIter::one(*dst),
            Self::U64ToDec { dst, .. } => WritesIter::one(*dst),
            Self::BytesEq { dst, .. } => WritesIter::one(*dst),
            Self::StrEq { dst, .. } => WritesIter::one(*dst),
            Self::BytesConcat { dst, .. } => WritesIter::one(*dst),
            Self::StrConcat { dst, .. } => WritesIter::one(*dst),
            Self::BytesGet { dst, .. } => WritesIter::one(*dst),
            Self::BytesGetImm { dst, .. } => WritesIter::one(*dst),
            Self::BytesSlice { dst, .. } => WritesIter::one(*dst),
            Self::StrSlice { dst, .. } => WritesIter::one(*dst),
            Self::StrToBytes { dst, .. } => WritesIter::one(*dst),
            Self::BytesToStr { dst, .. } => WritesIter::one(*dst),
            Self::F64Div { dst, .. } => WritesIter::one(*dst),
            Self::F64Eq { dst, .. } => WritesIter::one(*dst),
            Self::F64Lt { dst, .. } => WritesIter::one(*dst),
            Self::F64Gt { dst, .. } => WritesIter::one(*dst),
            Self::F64Le { dst, .. } => WritesIter::one(*dst),
            Self::F64Ge { dst, .. } => WritesIter::one(*dst),
            Self::BoolAnd { dst, .. } => WritesIter::one(*dst),
            Self::BoolOr { dst, .. } => WritesIter::one(*dst),
            Self::BoolXor { dst, .. } => WritesIter::one(*dst),
            Self::F64Neg { dst, .. } => WritesIter::one(*dst),
            Self::F64Abs { dst, .. } => WritesIter::one(*dst),
            Self::F64Min { dst, .. } => WritesIter::one(*dst),
            Self::F64Max { dst, .. } => WritesIter::one(*dst),
            Self::F64MinNum { dst, .. } => WritesIter::one(*dst),
            Self::F64MaxNum { dst, .. } => WritesIter::one(*dst),
            Self::F64Rem { dst, .. } => WritesIter::one(*dst),
            Self::F64ToBits { dst, .. } => WritesIter::one(*dst),
            Self::F64FromBits { dst, .. } => WritesIter::one(*dst),
        }
    }
}
